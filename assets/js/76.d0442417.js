(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{630:function(t,s,a){"use strict";a.r(s);var e=a(17),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"vue-原理部分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-原理部分"}},[t._v("#")]),t._v(" vue 原理部分")]),t._v(" "),a("h3",{attrs:{id:"_1-vue-双向绑定原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue-双向绑定原理"}},[t._v("#")]),t._v(" 1. vue 双向绑定原理")]),t._v(" "),a("p",[t._v("A. 数据劫持，Object.defineProperty getter setter\nB. 依赖收集\nC. 发布-订阅模式\nD. 虚拟 DOM（Virtual DOM）\nE. Watcher 和 Dep")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("数据劫持\n在Vue初始化过程中，Vue会递归遍历数据对象的每个属性，并使用Object.defineProperty()方法为这些属性设置getter和setter。这样，当数据发生变化时，setter会被触发，进而通知所有订阅者进行视图更新。")])]),t._v(" "),a("li",[a("p",[t._v("依赖收集（Dependency Collection）\n在 getter 被触发时，它会将当前的 watcher（观察者）添加到该属性的依赖列表中。这样，当属性值发生变化时，所有依赖于这个属性的 watcher 都会被通知。")])])]),t._v(" "),a("p",[t._v("例如，在模板中每次访问某个数据属性时，Vue 会自动记录当前正在渲染的组件作为一个依赖。")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[t._v("发布-订阅模式（Publish-Subscribe Pattern）\n当数据变化时，setter 会被触发，它会通知所有依赖于这个属性的 watcher。这些 watcher 会触发它们绑定的回调函数，从而更新 DOM 或执行其他逻辑。")])]),t._v(" "),a("li",[a("p",[t._v("虚拟 DOM（Virtual DOM）\nVue 使用虚拟 DOM 来最小化真实 DOM 的操作。当数据变化时，Vue 会使用虚拟 DOM 来计算最小的更新范围，然后将这些变化应用到真实的 DOM 上。这提高了性能，尤其是在处理大量数据和复杂视图时。")])]),t._v(" "),a("li",[a("p",[t._v("Watcher 和 Dep（依赖）\n在 Vue 中，每一个组件实例都有其自己的 watcher 实例。\n这些 watcher 负责观察数据的变化。Dep 是用来管理依赖的类，每个属性都有一个对应的 Dep 实例。\n当属性被访问时，当前正在计算的 watcher 会被添加到该属性的依赖列表中。")])])]),t._v(" "),a("h3",{attrs:{id:"_2-vue-的响应式原理中-object-defineproperty-有什么缺陷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue-的响应式原理中-object-defineproperty-有什么缺陷"}},[t._v("#")]),t._v(" 2. Vue 的响应式原理中 Object.defineProperty 有什么缺陷？")]),t._v(" "),a("p",[t._v("为什么在 Vue3.0 采用了 Proxy，抛弃了 Object.defineProperty？")]),t._v(" "),a("ul",[a("li",[t._v("Object.defineProperty 无法监控到数组下标的变化，导致通过数组下标添加元素，不能实时响应；")]),t._v(" "),a("li",[t._v("Object.defineProperty 只能劫持对象的属性，从而需要对每个对象，每个属性进行遍历，如果，属性值是对象，还需要深度遍历。\nProxy 可以劫持整个对象，并返回一个新的对象。")]),t._v(" "),a("li",[t._v("Proxy 不仅可以代理对象，还可以代理数组。还可以代理动态增加的属性。")])]),t._v(" "),a("h3",{attrs:{id:"_3-双向绑定和-vuex-是否冲突"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-双向绑定和-vuex-是否冲突"}},[t._v("#")]),t._v(" 3. 双向绑定和 vuex 是否冲突")]),t._v(" "),a("p",[t._v("在严格模式下直接使用确实会有问题。")]),t._v(" "),a("p",[t._v("在默认情况下，v-model 和 Vuex 并不直接冲突。然而，如果在不恰当地使用它们的情况下，可能会出现一些混淆或不一致。主要问题通常出现在以下方面：")]),t._v(" "),a("ol",[a("li",[t._v("直接修改 Vuex 中的状态：")])]),t._v(" "),a("p",[t._v('使用 v-model 直接在模板中修改 Vuex 中的状态（例如，通过 v-model="someState" 直接绑定到 Vuex 的一个 state），这通常不被推荐。因为这违反了 Vuex 的单向数据流原则。Vuex 的 state 应该通过提交 mutation 来更新，而不是直接修改。')]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("局部状态与全局状态混淆：")])]),t._v(" "),a("p",[t._v("在组件中使用 v-model 时，如果该组件同时需要使用 Vuex 中的状态，可能会导致逻辑上的混乱。例如，如果组件的某个输入字段同时需要绑定到 Vuex 状态和本地数据属性上，这会导致难以追踪和维护的数据流。")]),t._v(" "),a("p",[t._v("解决方案\n使用计算属性：")]),t._v(" "),a("p",[t._v("当需要在组件中使用 Vuex 状态时，可以通过计算属性来创建一个基于 Vuex 状态的本地属性，然后在模板中使用 v-model 绑定到这个计算属性上。")]),t._v(" "),a("p",[t._v("解决方案：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("model"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"message"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("computed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("message")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'updateMessage'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tReturn "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mutations")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UPDATE_MESSAGE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tstate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("actions")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update_message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tcommit\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UPDATE_MESSAGE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" v"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("使用辅助函数：")]),t._v(" "),a("p",[t._v("对于表单输入，可以使用 Vuex 的辅助函数 mapGetters 和 mapActions 或 mapMutations 来简化代码：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("input v"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("model"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("template"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mapGetters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mapActions "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vuex'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("computed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapGetters")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("methods")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mapActions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'updateValue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-vue3-0-是如何变得更快的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-vue3-0-是如何变得更快的"}},[t._v("#")]),t._v(" 4. Vue3.0 是如何变得更快的？")]),t._v(" "),a("ol",[a("li",[t._v("diff 方法优化 Vue2.x 中的虚拟 dom 是进行全量的对比。")]),t._v(" "),a("li",[t._v("Vue3.0 中新增了静态标记（PatchFlag）：")])]),t._v(" "),a("ul",[a("li",[t._v("在与上次虚拟结点进行对比的时候，只对比带有 patch flag 的节点，并且可以通过 flag 的信息 得知当前节点要对比的具体内容化。")]),t._v(" "),a("li",[t._v("hoistStatic 静态提升 Vue2.x : 无论元素是否参与更新，每次都会重新创建。")]),t._v(" "),a("li",[t._v("Vue3.0 : 对不参与更新的元素，只会被创建一次，之后会在每次渲染时 候被不停的复用。")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("cacheHandlers 事件侦听器缓存 默认情况下 onClick 会被视为动态绑定，所以每次都会去追踪它的 变化但是因为是同一个函数，所以没有追踪变化，直接缓存起来复用即可。")])]),t._v(" "),a("h3",{attrs:{id:"_5-nexttick-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-nexttick-原理"}},[t._v("#")]),t._v(" 5. nextTick 原理")]),t._v(" "),a("ul",[a("li",[t._v("异步")]),t._v(" "),a("li",[t._v("事件循环")])]),t._v(" "),a("h3",{attrs:{id:"_6-hmr-热更新原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-hmr-热更新原理"}},[t._v("#")]),t._v(" 6. HMR 热更新原理")]),t._v(" "),a("ol",[a("li",[t._v("websocket")])])])}),[],!1,null,null,null);s.default=n.exports}}]);